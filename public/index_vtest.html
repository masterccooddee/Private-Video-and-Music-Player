<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DASH TEST</title>
    <link href="https://vjs.zencdn.net/8.0.4/video-js.css" rel="stylesheet">
    <script src="https://vjs.zencdn.net/8.0.4/video.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-dash/dist/videojs-dash.min.js"></script>

</head>

<body>
    <h1>Video.js DASH Example</h1>
    <video id="my-video" class="video-js vjs-default-skin" preload="auto" controls width="1280" height="720"
        data-setup='{}'>

    </video>
    <script>
        //const SubtitlesOctopus =  require('libass-wasm');
        const player = videojs('my-video', {

            autoplay: false,

        });
        fetch('/video/video:2')
            .then(res => {
                return res.json();
            })
            .then(data => {
                console.log(data);
                player.src({
                    src: data.video_url,
                    type: 'application/dash+xml',
                });
                player.poster(data.poster_url);
            })
        //player.src({
        //    src: '../public/video_tmp/Steins;Gate/S1/2/output.mpd',
        //    type: 'application/dash+xml',
        //});

        //let options = {
        //        video: document.getElementById('my-video'), // HTML5 video element
        //        subUrl: '../../Video/Steins;Gate/S1/Steins;Gate - 02 (BD 1280x720 AVC AAC).ass', // Link to subtitles
        //        workerUrl: '/libassjs-worker.js', // Link to WebAssembly-based file "libassjs-worker.js"
        //        legacyWorkerUrl: '/libassjs-worker-legacy.js' // Link to non-WebAssembly worker
        //    };
        //let instance = new SubtitlesOctopus(options);
    </script>
</body>

</html>